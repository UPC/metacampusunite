define(["jquery"],function(e){var r={init:function(){r.addilterlistener(),r.removefilterlistener()},addilterlistener:function(){e(".fieldtofind > .addfieldfilter").on("click",function(){let t=r.getfielddata(e(this));"*"===t.currentquery?t.queryinput.val(t.newquery):t.queryinput.val(t.currentquery+" AND "+t.newquery.trimEnd()),t.queryinput.parents("form").submit()})},removefilterlistener:function(){e(".fieldtofind > .removefieldfilter").on("click",function(){let t;(t=e(this).hasClass("deleteicon")?r.getfielddata(e(this).parent()):r.getfielddata(e(this))).newquery=r.removefieldfromquery(t.currentquery,t.newquery);["","&&","||","AND","OR","and","or"].includes(t.newquery.trim())&&(t.newquery="*"),t.queryinput.val(t.newquery.trimEnd()),t.queryinput.parents("form").submit()})},getfielddata:function(r){let t=r.data("fieldname"),i=r.data("fieldvalue"),n=e("form input#id_q");return{fieldname:t,fieldvalue:i,queryinput:n,newquery:t+':"'+i+'"',currentquery:n.val()}},removefieldfromquery:function(e,t){let i=e.replace("AND "+t,"").trimStart();e==i&&(i=e.replace(t,"").trimStart());return i=r.removeextraoperator(i,["AND","OR","&&","||"])},removeextraoperator:function(e,r){let t,i=e;return r.forEach(function(r){(t=e.replace(r,""))!==e&&(i=t.trimStart())}),i}};return r});